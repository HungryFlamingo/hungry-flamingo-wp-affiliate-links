"use strict";(self.webpackChunkhungry_flamingo_wp_affiliate_links=self.webpackChunkhungry_flamingo_wp_affiliate_links||[]).push([[49],{4376:function(e,t,a){function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i={endpoint:e,current_time:(new Date).toLocaleTimeString(),_wpnonce:wpEnv._wp_rest_nonce,_wp_http_referer:wpEnv._wp_http_referer},l={...i};async function n(){const t=await fetch(wpEnv._wp_rest_url+"hungry-flamingo/v1/"+wpEnv.plugin_slug+"/"+e,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8","X-WP-Nonce":wpEnv._wp_rest_nonce}}).then((e=>{if(e.ok)return e.json();throw new Error("Server response was not OK")})).then((e=>e));return null!=t.success?t:'{"success":false, "msg":"Unknown error"}'}async function r(){var t=JSON.stringify(l);const a=await fetch(wpEnv._wp_rest_url+"hungry-flamingo/v1/"+wpEnv.plugin_slug+"/"+e,{method:"POST",body:t,headers:{"Content-Type":"application/json; charset=utf-8","X-WP-Nonce":wpEnv._wp_rest_nonce}}).then((e=>{if(e.ok)return e.json();throw new Error("Server response was not OK")})).then((e=>e));return null!=a.success?a:'{"success":false, "msg":"Unknown error"}'}return l.data=void 0!==a?JSON.stringify(a):null,"GET"===t?n():"POST"===t?r():null}a.d(t,{y:function(){return i}})},8031:function(e,t,a){a.d(t,{z:function(){return i}});const i=React.lazy((()=>Promise.all([a.e(632),a.e(308),a.e(341)]).then(a.bind(a,3457))))},2049:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=a(7462),l=(a(9307),a(7536)),n=a(8834),r=a(9501),f=a(5116),o=a(8031),s=a(4376);const c=r.Ry().shape({affiliate_url:r.Z_("This won't work.").matches("^((http|https)://)?(www.)?(?!.*(http|https|www.))?[a-zA-Z0-9_-]+(.([a-zA-Z]+)([a-zA-Z]+))+/?((/([a-zA-Z0-9_-]+))+(/)?)?$","Please enter a valid website URL").required("This field is required")});function u(e){let{affiliateData:t}=e;const[a,r]=React.useState(!1),[u,d]=React.useState(!1),[_,w]=React.useState(!1),{handleSubmit:p,register:h,reset:m,setError:g,formState:{errors:v},setFocus:y}=(0,l.cI)({resolver:(0,n.X)(c)}),E=(e,a)=>{const i={affiliate_title:e.affiliate_title,affiliate_url:e.affiliate_url,affiliate_icon:e.affiliate_icon,affiliate_old_url:void 0!==t?t.url:null};(async()=>{r(!0),w(!0);try{const e=await(0,s.y)("delete-affiliate-link","POST",i);1==e.success?(d(!0),setTimeout((function(){r(!1),window.location.reload()}),2e3)):(g("affiliate_url",{type:"manual",message:e.msg}),r(!1),w(!1))}catch(e){console.log(e)}})()},T=()=>void 0===t?null:React.createElement(o.z,{startIcon:"delete",variant:"outlined",buttonText:"Delete affiliate",onClick:p(E)});return React.useEffect((()=>{y("affiliate_title")}),[]),React.createElement(React.Fragment,null,React.createElement("form",{id:"hungry_flamingo_wpal_add_affiliate",noValidate:!0,autoComplete:"off"},React.createElement(f.Z,(0,i.Z)({variant:"standard",name:"affiliate_title",id:"affiliate_title",type:"text",label:"Affiliate Title/Name",defaultValue:void 0!==t?t.title:null,disabled:_,error:v.affiliate_title,sx:{width:"100%"}},h("affiliate_title",{required:!0}),{helperText:v.affiliate_title?v.affiliate_title.message:"The name for the affiliate. Will also be used as ALT tag."})),React.createElement(f.Z,(0,i.Z)({variant:"standard",name:"affiliate_url",id:"affiliate_url",type:"text",label:"Affiliate base URL",defaultValue:void 0!==t?t.url:null,disabled:_,error:v.affiliate_url,sx:{width:"100%"}},h("affiliate_url",{required:!0}),{helperText:v.affiliate_url?v.affiliate_url.message:"The base url to be masked automatically as an affiliate ad."})),React.createElement(f.Z,(0,i.Z)({variant:"standard",name:"affiliate_icon",id:"affiliate_icon",type:"text",label:"Affiliate Icon (base64)",defaultValue:void 0!==t?t.icon:null,disabled:_,error:v.affiliate_icon,sx:{width:"100%"}},h("affiliate_icon",{required:!1}),{helperText:v.affiliate_icon?v.affiliate_icon.message:"Base64 string with an icon to be added next to the affiliate links."})),React.createElement("div",null,React.createElement(o.z,{onClick:p(((e,a)=>{const i={affiliate_title:e.affiliate_title,affiliate_url:e.affiliate_url,affiliate_icon:e.affiliate_icon,affiliate_old_url:void 0!==t?t.url:null};(async()=>{r(!0),w(!0);try{const e=await(0,s.y)(void 0===t?"add-affiliate-link":"update-affiliate-link","POST",i);1==e.success?(d(!0),setTimeout((function(){r(!1),window.location.reload()}),2e3)):(g("affiliate_url",{type:"manual",message:e.msg}),r(!1),w(!1))}catch(e){console.log(e)}})()})),disabled:_,loading:a,startIcon:"save",buttonText:void 0===t?"Add affiliate":"Save affiliate"}))),React.createElement(T,null))}}}]);